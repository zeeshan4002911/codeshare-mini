<section id="app-header">
  <nav class="navbar navbar-expand-lg navbar border-bottom p-0">
    <div class="container-fluid p-0 justify-content-around justify-content-md-between">
      <!-- Left Application title -->
      <span class="d-flex align-items-center justify-content-center">
        <a class="navbar-brand ps-3">&lt;/&gt; codecrack</a>
        <nav class="nav"
          [ngClass]="{
            'btn-nav-light': themeMode == 'light',
            'btn-nav-dark': themeMode == 'dark'
          }" 
        >
          <a class="btn-nav cursor-pointer px-2 py-1 active">Editor</a>
          <a class="btn-nav cursor-pointer px-2 py-1" (click)="openToast()">Diff-Checker</a>
        </nav>
      </span>

      <!-- Right section for language, formatter, theme toggle and more option -->
      <span class="d-flex align-items-center pe-1">
        <div class="language-dropdown dropdown px-2">
          <button 
            class="btn dropdown-header dropdown-toggle p-1 " 
            type="button" 
            data-bs-toggle="dropdown" 
            aria-expanded="false"
          >
            {{selectedLanguage?.['aliases']?.[0] || selectedLanguage['id']}}
          </button>
          <ul class="dropdown-menu w-100 pt-0">
            <li class="d-flex flex-column align-items-center py-2">
              <input 
                id="dropdownSearch" 
                type="text" 
                class="form-control py-1" 
                placeholder="Search..."
                [(ngModel)]="searchLanguage"
                (keyup)="filterLanguages()"
                autocomplete="off"
              />
            </li>
            <ul class="language-dropdown-body p-0 overflow-auto">
            @for (language of languages; track language['id']) {
              <li 
                class="dropdown-item text-truncate cursor-pointer" 
                (click)="selectLanguage(language)"
                role="button"
                data-bs-toggle="tooltip"
                [title]="language?.['aliases']?.[0] || (language['id'] | titlecase)"
              >
                {{language?.['aliases']?.[0] || (language['id'] | titlecase) }}
              </li>
            }
            </ul>
          </ul>
        </div>

        <button 
          class="btn btn-theme py-1 px-2"
          [ngClass]="{
            'btn-theme-dark': themeMode == 'light', 
            'btn-theme-light': themeMode == 'dark'
          }" 
          (click)="this.moreOptionHanlder('format-code')"
          data-bs-toggle="tooltip"
          title="Formatter"
        >
          <i class="bi bi-braces"></i>
        </button>
        
        <button 
          class="btn btn-theme py-1 px-2"
          [ngClass]="{
            'btn-theme-dark': themeMode == 'light', 
            'btn-theme-light': themeMode == 'dark'
          }" 
          (click)="this.moreOptionHanlder('clear-all')"
          data-bs-toggle="tooltip"
          title="Erase all"
        >
          <i class="bi bi-trash"></i>
        </button>

        <button 
          class="btn btn-theme py-1 px-2"
          [ngClass]="{
            'btn-theme-dark': themeMode == 'light', 
            'btn-theme-light': themeMode == 'dark'
          }"
          (click)="toggleTheme()"
          data-bs-toggle="tooltip"
          title="Toggle theme"
        >
          @if(themeMode == 'light') {
            <i class="bi bi-moon-stars"></i>
          } @else {
            <i class="bi bi-sun"></i>
          }
        </button>

        <button 
          #popoverBtn
          type="button" 
          class="btn btn-theme py-1 px-2"
          data-bs-toggle="popover" 
          data-bs-placement="bottom" 
        >
          <i 
            class="bi bi-three-dots-vertical"
            data-bs-toggle="tooltip"
            title="More options"
          ></i>
        </button>
      </span>
    </div>
  </nav>
</section>

<!-- Generic Bootstrap Modal -->
<div class="modal fade" id="bModal" tabindex="-1" aria-labelledby="bModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <h5 class="modal-title" id="bModalLabel">Title</h5> -->
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Modal content goes here -->
        <p>Feature is Coming Soon.</p>
      </div>
      <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div> -->
    </div>
  </div>
</div>

<!-- Generic Bootstrap Toast -->
<div id="bToast" class="toast align-items-center end-0 position-absolute mx-3" role="alert" aria-live="assertive" aria-atomic="true">
  <div class="d-flex">
    <div class="toast-body">
      Feature is Coming Soon.
    </div>
    <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
</div>

<!-- More Option Feature Buttons -->
<ng-template #popoverContent>
  <div class="d-flex flex-column">
    <div class="d-flex justify-content-center">
      <button 
        class="btn btn-theme btn-theme-borderless py-1 px-2" 
        (click)="moreOptionHanlder('scroll-to-top')"
        data-bs-toggle="tooltip"
        title="Move to top"
      >
        <i class="bi bi-arrow-up"></i>
      </button>
      <button 
        class="btn btn-theme btn-theme-borderless py-1 px-2" 
        (click)="moreOptionHanlder('scroll-to-bottom')"
        data-bs-toggle="tooltip"
        title="Move to bottom"
      >
        <i class="bi bi-arrow-down"></i>
      </button>
    </div>
    <div class="d-flex justify-content-center">
      <button 
        class="btn btn-theme btn-theme-borderless py-1 px-2" 
        (click)="moreOptionHanlder('undo')"
        data-bs-toggle="tooltip"
        title="Undo"
      >
        <i class="bi bi-arrow-counterclockwise"></i>
      </button>
      <button 
        class="btn btn-theme btn-theme-borderless py-1 px-2" 
        (click)="moreOptionHanlder('redo')"
        data-bs-toggle="tooltip"
        title="Redo"
      >
        <i class="bi bi-arrow-clockwise"></i>
      </button>
    </div>
    <div class="d-flex justify-content-center">
      <button 
        class="btn btn-theme btn-theme-borderless p-1" 
        (click)="moreOptionHanlder('font-up')"
        data-bs-toggle="tooltip"
        title="Font increment"
      >
        A <i class="bi bi-caret-up-fill icon-super"></i>
      </button>
      <button 
        class="btn btn-theme btn-theme-borderless p-1" 
        (click)="moreOptionHanlder('font-down')"
        data-bs-toggle="tooltip"
        title="Font decrement"
      >
        A <i class="bi bi-caret-down-fill icon-super"></i>
      </button>
    </div>
    <div class="d-flex justify-content-center">
      <button 
        class="btn btn-theme btn-theme-borderless py-1 px-2" 
        (click)="moreOptionHanlder('word-wrap-toggle')"
        data-bs-toggle="tooltip"
        title="Word wrap toggle"
      >
        <i class="bi bi-text-wrap"></i>
      </button>
    </div>
  </div>
</ng-template>

<!-- Router outlet for rendering views -->
<router-outlet></router-outlet>